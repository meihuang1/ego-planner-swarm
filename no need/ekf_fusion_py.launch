<launch>
  <param name="use_sim_time" value="false"/>

  <node pkg="tf" type="static_transform_publisher" name="fake_odom_tf"
        args="0 0 0 0 0 0 map drone_0/odom 100"/>

  <!-- <node pkg="tf" type="static_transform_publisher" name="world_to_map"
      args="20 9 1 0 0 0 world map 100"/> -->

  <!-- 加载EKF参数 -->
  <rosparam file="$(find co_navi_pkg)/config/ekf_gps_imu.yaml" command="load" />

  <!-- 启动EKF节点 -->
  <node pkg="robot_localization" type="ekf_localization_node"
        name="ekf_filter_node"   output="screen" />

  <!-- 启动 navsat 节点 -->  
  <node pkg="robot_localization" type="navsat_transform_node"
        name="navsat_transform"  output="screen">

    <!-- <param name="frequency" value="100"/> -->
    <param name="broadcast_cartesian_transform" value="true"/>   <!-- 发布map->odom-->
    <param name="publish_odom_transform" value="true"/>

    <!-- <param name="publish_transform" value="true"/> -->
    <param name="publish_filtered_gps" value="true"/>

    <param name="use_odometry_source" value="false"/>
    <param name="use_odometry_yaw" value="false"/>
    
    <param name="wait_for_datum" value="false" />  <!-- 等待有效 GPS 数据 -->
    
    <param name="zero_altitude" value="true"/>
    <!-- <param name="transform_timeout" value="0" /> -->
    <!-- <param name="wait_for_datum" value="false" /> -->

    <param name="map_frame" value="map" />
    <param name="odom_frame" value="drone_0/odom"/>
    <param name="base_link_frame" value="drone_0/base_link"/>

    <remap from="/imu/data" to="/drone_0/imu"/>
    <remap from="/gps/fix" to="/drone_0/gps"/>

  </node>
</launch>